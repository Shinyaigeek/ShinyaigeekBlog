---
name: emailjsでjsだけでメールフォームを実装する
path: /12
tag: [Programing,JavaScript]
description: emailjsを使ってjsだけ書いてメールフォームを実装する
img: /static/icon.png
date: 2019/3/16
---

## はじめに
なかなか久しぶりです、しにゃいです
FGOQuestありますね、オタクですのでちゃんとプレイしながらこれを書いています。
前回Vue.jsでブログを作りたいっていう記事を書いたじゃないですか、それもうできたっちゃできちゃったんですよね
あとgit hub上でマークダウンで記事を書いてPRによって更新されるって機能だけですね
そこまで行けば立派なCMSの完成ですね()
なんで今のこのブログはVue.jsで作ったものになりますね
で、そのときメールフォーム実装したいなってなって、一瞬Laravalなりrails混ぜなきゃなのかなってなって
めんどくさ！！！！！！！！
ってなってしまわれたんですけど、冷静に考えればnpmで打ち込めてしまうのではないかと思って調べたら本当にあったんですよね、emailjsっていうんですけど
でもその日本語記事がなかったので使用したがてらemailjsについてまとめていこうかなと
## emailjsについて
ひとまず下に公式サイトを貼っておきます。
英語読めるやつは多分こっち読んだ方がいい、多分知らんけど
 
[emailja](https://www.emailjs.com/)
まあ要するにこれの売りはサーバーサイドのコードを書かずともメールフォームを設置できる！！みたいな
個人的に強いと思ったのは

* 自由度の高さ  
フォームの見た目なりその処理なりめちゃくちゃ自由度が高い
* 学習コストの低さ  
正味マジで全然勉強せんでいい、smtpサーバーとかって単語知らなくても設置できる
マジでjavascriptしか書かない

この辺かなとは思う
まあ英語わからん/読みたくないって人向けに日本語でハンズオン式でもできるように記事書いていくよん
セットアップ
まずemailjsのHPに行く(上記のやつ)、一応下にも貼っとく
 
[emailjs](https://www.emailjs.com/)
でLog inできるからひとまずそれをクリック、そしたらログインフォームに飛ぶ、そこからsign upも出来る
sign upに必要なのはメールアドレスだけだからピュピュピュっと終わらせてほしい(割とすぐ終わる)
でアカウント作成後ログインする
するとemailjsのdashboardに飛ばされる、ここで色々と設定して行く
<img src="/static/12-3.png" />
ここのEmail ServicesってとこでAdd new serviceをクリック
でユーザーから送られるメールを受け取るためのメールアドレスの設定をする。
僕はメインアドレスがgmailなのでgmailを選択、その後メインアドレスのアカウントと紐付けした
で次はEmail Templatesを選択、ここでメールの具体的な設定をする。
メールフォームから受け取りたい情報を整理すると、
* ユーザーの名前

* 返信用のユーザーのメールアドレス

* そのコメントがどのページから送られて来たか

* コメントの件名

* コメント内容
まあこんなもんかなと
なのでそれぞれ適宜変数名を想定してEmail Templatesに打ち込みます
変数名に関しては{{subject}}みたいな感じで囲めば大丈夫です

大体の人は必要ないかなと思いましたが僕は一応こんな感じで書きました
あとはTo Emailに、そのユーザーからのメールを受け取りたいメールアドレスを打ち込めば設定完了、ちょろくね?
## 設置
で肝心の設置方法なんだけど、地のHTML使ってたり、Vueとかで書いてる時もCLI使ってないんだったら普通にInstallationで出てくるコードをheadタグの中にコピペ、さらにEmail Templatesで作ったテンプレートを選択して、Copy Codeからコードをコピー、いい感じに埋め込めばなんとかなる
ただVue CLIとか使ってて、つまりES6使われている時とかはこの方法だとうまくいかないからちょっと工夫がいる
まずこの場合はInstallationからhead用のコードをコピーする必要ななくて、普通にターミナルで
```Console
npm i emailjs-com --save
```
で実行、どうやらnpmにはemailjsも存在するけどそれとは別物っぽい(?)
で読み込みたいコンポーネントで
```Vue
import * as emailjs from 'emailjs-com'
```
って読み込ませる。
これで送信に関しては
```Vue
emailjs.send(service_id, template_id, template_params,user_id)
```
で実行できるようになる
sendのなかの変数については普通にEmail TemplatesでCopy Codeを選択した時に出てくるやつでいい
でVueを使っているときはinputを何個か設置してそれをデータバインディングさせる、そして送信ボタンを設置して、methodsにsendを実行させるメソッドを追加して送信ボタンを押した時に実行させればいい、これで完了、偉い
ちなみに記事書いてる間にFGOQuestクリアできました、やったね